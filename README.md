# Content Entity Model Definition

This is the Thrift definition of the Content entity model, and the published
versions of this repository are built from the autogenerated code in various
languages.

[![Maven Central](https://maven-badges.herokuapp.com/maven-central/com.gu/content-entity-model-thrift/badge.svg)](https://maven-badges.herokuapp.com/maven-central/com.gu/content-entity-model-thrift)

## How to release

Ensure you have the following installed on your machine:
 - `tsc` (`brew install typescript`)
 - `npm` (not sure! there are so many ways to install it)
 
Ensure you have an NPM account, part of the [@guardian](https://www.npmjs.com/org/guardian) org with a [configured token](https://docs.npmjs.com/creating-and-viewing-authentication-tokens)

```sbtshell
release // will release the scala / thrift projects
project typescriptClasses
release 1.0.0 // you have to specify the version again
```

This will release 2 artifacts to Maven Central:

* `content-entity-model_2.13-$version.jar` contains the Thrift files and Scrooge-generated Scala 2.13 classes
* `content-entity-model-thrift-$version.jar` contains only the Thrift files

The package is cross-built against Scala 2.13, 2.12 and 2.11
You will need a PGP key and Sonatype credentials.  

This will also release the js/typescript package on NPM.